{"remainingRequest":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client\\src\\views\\Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client\\src\\views\\Detail.vue","mtime":1595127684000},{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBSaWNoQ29udGVudCBmcm9tICJAL2NvbXBvbmVudHMvUmljaENvbnRlbnQudnVlIjsKaW1wb3J0IEZlZWRBY3Rpb25zIGZyb20gIkAvY29tcG9uZW50cy9GZWVkQWN0aW9ucy52dWUiOwppbXBvcnQgRWRpdG9yIGZyb20gIkAvY29tcG9uZW50cy9FZGl0b3IudnVlIjsKaW1wb3J0IHV0aWwgZnJvbSAiQC91dGlscy9pbmRleC5qcyIKbGV0IGRldGFpbCwgaWQ7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiZGV0YWlsIiwKICBjb21wb25lbnRzOiB7CiAgICBSaWNoQ29udGVudCwKICAgIEZlZWRBY3Rpb25zLAogICAgRWRpdG9yCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjp7fSwKICAgICAgbXNnOnt9LAogICAgICBpc1Nob3dNb3JlOiB0cnVlLAogICAgICBpc0FzazogZmFsc2UsCiAgICAgIGVpZHRvcjogIiIsCiAgICAgIGlzQ2xlYXI6IGZhbHNlCiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIGlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgdGhpcy5nZXREZXRhaWxNc2coKTsKICAgIHRoaXMudXNlciA9IHV0aWwuZ2V0VXNlcigpCiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+iOt+WPluaVsOaNrgogICAgZ2V0RGV0YWlsTXNnKCkgewogICAgICB0aGlzLmF4aW9zLmdldChgL3F1ZXN0aW9uL2RldGFpbD9xaWQ9JHtpZH1gKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICB0aGlzLm1zZz1yZXMuZGF0YQogICAgICAgICAgdGhpcy5hbnN3ZXJMaXN0ID0gcmVzLmRhdGEuYW5zd2VyTGlzdDsKICAgICAgICAgIHRoaXMudGl0bGUgPSByZXMuZGF0YS50aXRsZTsKICAgICAgICAgIHRoaXMuc3VtbWFyeSA9IHJlcy5kYXRhLnN1bW1hcnk7CiAgICAgICAgICB0aGlzLmFuc3dlck51bSA9IHJlcy5kYXRhLmFuc3dlck51bTsKICAgICAgICAgIGRldGFpbCA9IHJlcy5kYXRhLmRldGFpbDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8v55uR5ZCs57yW6L6R5ZmoCiAgICBjb250ZW50Q2hhbmdlKGRhdGEpIHsKICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgIHRoaXMuZWlkdG9yID0gZGF0YTsKICAgIH0sCiAgICAvL+aYvuekuuabtOWkmgogICAgc2hvd01vcmUoKSB7CiAgICAgIHRoaXMuc3VtbWFyeSA9IGRldGFpbDsKICAgICAgdGhpcy5pc1Nob3dNb3JlID0gZmFsc2U7CiAgICB9LAogICAgLy/lhpnlm57nrZQKICAgIHdyaXRlQW5zd2VyKCl7CiAgICAgIGlmKHV0aWwuaXNMb2dpbigpKXsKICAgICAgICB0aGlzLmlzQXNrID0gdHJ1ZTsKICAgICAgfWVsc2V7CiAgICAgICAgIHRoaXMuJGFsZXJ0KCfor7flhYjnmbvlvZUnLCAn5o+Q56S6Jyk7CiAgICAgIH0KICAgIH0sCiAgICAvL+aPkOS6pOWbnuetlAogICAgc3VibWl0QW5zd2VyKCkgewogICAgICBsZXQgcGFyYW1zID0gewogICAgICAgIGNvbnRlbnQ6IHRoaXMuZWlkdG9yLAogICAgICAgIHFpZDogaWQKICAgICAgfTsKICAgICAgdGhpcy5heGlvcy5wb3N0KCIvYW5zd2VyL2FkZCIsIHBhcmFtcykudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICLlm57nrZTmiJDlip8iLAogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5pc0NsZWFyID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuZ2V0RGV0YWlsTXNnKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Detail.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div id=\"detail\">\n    <!-- 头部 -->\n    <div class=\"QuestionHeader\">\n      <div class=\"QuestionHeader-content\">\n        <div class=\"QuestionHeader-main\">\n          <div class=\"QuestionHeader-title\">{{msg.title}}</div>\n          <div class=\"QuestionHeader-detail\">\n            {{msg.summary}}\n            <div class=\"QuestionHeader-more\" @click=\"showMore\" v-if=\"isShowMore&&msg.summary\">\n              <span>显示全部</span>\n              <span class=\"iconfont icon-arrow-down\"></span>\n            </div>\n          </div>\n        </div>\n        <!-- 侧边 -->\n        <div class=\"QuestionHeader-side\">\n          <div class=\"QuestionStatus-item\">\n            <div class=\"QuestionStatus-name\">关注者</div>\n            <div class=\"QuestionStatus-num\">1,203</div>\n          </div>\n          <div class=\"QuestionStatus-split\"></div>\n          <div class=\"QuestionStatus-item\">\n            <div class=\"QuestionStatus-name\">被浏览</div>\n            <div class=\"QuestionStatus-num\">{{msg.lookNum}}</div>\n          </div>\n        </div>\n      </div>\n      <!-- 底部 -->\n      <div class=\"QuestionHeader-footer\">\n        <div class=\"QuestionHeader-footer-inner\">\n          <div class=\"QuestionButton-groups\">\n            <button class=\"QuestionButton-follow\">关注问题</button>\n            <button class=\"QuestionButton-ask\" @click=\"writeAnswer\">\n              <span class=\"iconfont icon-pen\"></span>\n              写回答\n            </button>\n          </div>\n          <div class=\"QuestionHeader-actions\">\n            <div class=\"ActionsWrap\">\n              <span class=\"iconfont icon-zan1\"></span>\n              <span class=\"ActionsText\">好问题</span>\n            </div>\n            <div class=\"ActionsWrap\">\n              <span class=\"iconfont icon-pinglun1\"></span>\n              <span class=\"ActionsText\">16条评论</span>\n            </div>\n            <div class=\"ActionsWrap\">\n              <span class=\"iconfont icon-xiaofeiji\"></span>\n              <span class=\"ActionsText\">分享</span>\n            </div>\n            <div class=\"ActionsWrap\">\n              <span class=\"iconfont icon-shenglvehao\"></span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 编辑器 -->\n    <div class=\"AnswerWrap\" v-if=\"isAsk\">\n      <div class=\"AnswerHeader\">\n        <img\n          :src=\"user.headUrl\"\n          alt\n          class=\"AuthorAvator\"\n        />\n        <span class=\"AuthorName\">{{user.name}}</span>\n      </div>\n      <editor @change=\"contentChange\" :isClear=\"isClear\"></editor>\n      <button class=\"AnswerButton\" @click=\"submitAnswer\">提交回答</button>\n    </div>\n\n    <!-- 回答 -->\n    <div class=\"QuestionMain\">\n      <div class=\"List\">\n        <div class=\"ListHeader\">{{msg.answerNum}}个回答</div>\n        <div class=\"ListItem\" v-for=\"(item,index) in msg.answerList\" :key=\"index\">\n          <rich-content :content=\"item\"></rich-content>\n          <feed-actions :actions=\"item.actions\"></feed-actions>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport RichContent from \"@/components/RichContent.vue\";\nimport FeedActions from \"@/components/FeedActions.vue\";\nimport Editor from \"@/components/Editor.vue\";\nimport util from \"@/utils/index.js\"\nlet detail, id;\nexport default {\n  name: \"detail\",\n  components: {\n    RichContent,\n    FeedActions,\n    Editor\n  },\n  data() {\n    return {\n      user:{},\n      msg:{},\n      isShowMore: true,\n      isAsk: false,\n      eidtor: \"\",\n      isClear: false\n    };\n  },\n  mounted() {\n    id = this.$route.params.id;\n    this.getDetailMsg();\n    this.user = util.getUser()\n  },\n  methods: {\n    //获取数据\n    getDetailMsg() {\n      this.axios.get(`/question/detail?qid=${id}`).then(res => {\n        if (res.status == 200) {\n          this.msg=res.data\n          this.answerList = res.data.answerList;\n          this.title = res.data.title;\n          this.summary = res.data.summary;\n          this.answerNum = res.data.answerNum;\n          detail = res.data.detail;\n        }\n      });\n    },\n    //监听编辑器\n    contentChange(data) {\n      console.log(data);\n      this.eidtor = data;\n    },\n    //显示更多\n    showMore() {\n      this.summary = detail;\n      this.isShowMore = false;\n    },\n    //写回答\n    writeAnswer(){\n      if(util.isLogin()){\n        this.isAsk = true;\n      }else{\n         this.$alert('请先登录', '提示');\n      }\n    },\n    //提交回答\n    submitAnswer() {\n      let params = {\n        content: this.eidtor,\n        qid: id\n      };\n      this.axios.post(\"/answer/add\", params).then(res => {\n        if (res.status == 200) {\n          this.$message({\n            message: \"回答成功\",\n            type: \"success\"\n          });\n          this.isClear = true;\n          this.getDetailMsg();\n        }\n      });\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n@import \"../assets/css/config\";\n// 头部\n.QuestionHeader {\n  width: 100%;\n  background: #ffffff;\n  box-shadow: 0 1px 3px rgba(26, 26, 26, 0.1);\n  padding: 16px 0;\n  &-content {\n    display: flex;\n    justify-content: space-between;\n    width: 1000px;\n    height: 100%;\n    padding: 0 16px;\n    margin: 0 auto;\n  }\n  &-main {\n    width: 694px;\n  }\n  &-title {\n    margin-top: 12px;\n    margin-bottom: 4px;\n    font-size: 22px;\n    font-weight: 600;\n    color: #1a1a1a;\n  }\n  &-detail {\n    cursor: pointer;\n    font-size: 15px;\n  }\n  &-more {\n    display: inline-block;\n    font-size: 14px;\n    color: $fontColor;\n  }\n  &-side {\n    display: flex;\n    width: 296px;\n    justify-content: flex-end;\n    .QuestionStatus-item {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      padding: 0 20px;\n      .QuestionStatus-name {\n        font-size: 14px;\n        color: $fontColor;\n      }\n      .QuestionStatus-num {\n        font-size: 18px;\n        font-weight: 600;\n      }\n    }\n    .QuestionStatus-split {\n      width: 1px;\n      background: #ebebeb;\n      height: 50px;\n    }\n  }\n  &-footer {\n    margin-top: 8px;\n    &-inner {\n      display: flex;\n      align-items: center;\n      width: 1000px;\n      height: 100%;\n      padding: 0 16px;\n      margin: 0 auto;\n    }\n    .QuestionButton-groups {\n      display: flex;\n      align-items: center;\n      .QuestionButton-follow {\n        cursor: pointer;\n        color: #ffffff;\n        background: $mainColor;\n        padding: 0 16px;\n        line-height: 34px;\n        height: 34px;\n        margin-right: 10px;\n        border: 1px solid $mainColor;\n        &:hover {\n          background: #097fec;\n        }\n      }\n      .QuestionButton-ask {\n        cursor: pointer;\n        padding: 0 16px;\n        line-height: 34px;\n        height: 34px;\n        border: 1px solid $mainColor;\n        background: #ffffff;\n        color: $mainColor;\n        &:hover {\n          background: #e8f3ff;\n        }\n      }\n      .icon-pen {\n        font-size: 14px;\n      }\n    }\n    .QuestionHeader-actions {\n      display: flex;\n      margin-left: 12px;\n      .ActionsWrap {\n        cursor: pointer;\n        font-size: 14px;\n        color: $fontColor;\n        padding: 0 8px;\n        &:hover {\n          color: #677081;\n        }\n      }\n      .ActionsText {\n        margin-left: 4px;\n      }\n    }\n  }\n}\n// 编辑器\n.AnswerWrap {\n  width: 1000px;\n  margin: 10px auto;\n  padding: 0 16px 60px 16px;\n  background: #ffffff;\n  .AnswerHeader {\n    display: flex;\n    align-items: center;\n    font-size: 15px;\n    font-weight: 600;\n    padding: 16px 0;\n    .AuthorAvator {\n      margin: 0 10px;\n      width: 30px;\n      height: 30px\n    }\n  }\n  .AnswerButton {\n    margin-top: 8px;\n    padding: 0 16px;\n    background: $mainColor;\n    color: #ffffff;\n    line-height: 36px;\n    float: right;\n    cursor: pointer;\n  }\n}\n// 回答\n.QuestionMain {\n  width: 1000px;\n  margin: 10px auto;\n  padding: 0 16px;\n  background: #ffffff;\n  .List {\n    padding: 0 20px;\n    .ListHeader {\n      height: 50px;\n      border-bottom: 1px solid #f6f6f6;\n      line-height: 50px;\n      font-weight: 600;\n    }\n    .ListItem {\n      padding: 16px 0;\n      border-bottom: 1px solid #ebebeb;\n    }\n  }\n}\n</style>\n\n"]}]}
{"remainingRequest":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\src\\views\\Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\src\\views\\Index.vue","mtime":1595577834000},{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMveHloL0Rlc2t0b3AvR3JhZHVhdGVEZXNpZ24vemhleWUtY2xpZW50Mi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBGZWVkSXRlbSBmcm9tICJAL2NvbXBvbmVudHMvRmVlZEl0ZW0udnVlIjsKaW1wb3J0IEdsb2JhbFNpZGVCYXIgZnJvbSAiQC9jb21wb25lbnRzL0dsb2JhbFNpZGVCYXIudnVlIjsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgdXRpbCBmcm9tICJAL3V0aWxzL2luZGV4LmpzIjsKdmFyIExvYWQ7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiaW5kZXgiLAogIGNvbXBvbmVudHM6IHsKICAgIEZlZWRJdGVtOiBGZWVkSXRlbSwKICAgIEdsb2JhbFNpZGVCYXI6IEdsb2JhbFNpZGVCYXIKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKFsiaXNBZGQiLCAic2VhcmNoTGlzdCJdKSksCiAgd2F0Y2g6IHsKICAgIGlzQWRkOiBmdW5jdGlvbiBpc0FkZChuZXdWYWx1ZSkgewogICAgICB0aGlzLmdldENvbnRlbnQoKTsKICAgIH0sCiAgICBzZWFyY2hMaXN0OiBmdW5jdGlvbiBzZWFyY2hMaXN0KG5ld1ZhbHVlKSB7CiAgICAgIHRoaXMuZmVlZExpc3QgPSBuZXdWYWx1ZTsKICAgICAgY29uc29sZS5sb2coIuabtOaWsOWIl+ihqCIpOwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZlZWRMaXN0OiBbXSwKICAgICAgYWN0aXZlTmFtZTogInJlY29tbWVuZCIsCiAgICAgIGZvbGxvd0xpc3Q6IFtdLAogICAgICBpc0xvYWQ6IGZhbHNlLAogICAgICByZWNQYWdlOiAxLAogICAgICAvL+aOqOiNkOmhtemdonBhZ2UKICAgICAgYXR0UGFnZTogMSwKICAgICAgLy/lhbPms6jpobXpnaJwYWdlCiAgICAgIGlzRW5kOiBmYWxzZQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldENvbnRlbnQoKTsKICAgIHRoaXMubGlzdGVuU2Nyb2xsKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+aOqOiNkOmhtemdouiOt+WPluaVsOaNrgogICAgZ2V0Q29udGVudDogZnVuY3Rpb24gZ2V0Q29udGVudCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJzZWFyY2giLCAiIik7CiAgICAgIHRoaXMuYXhpb3MuZ2V0KCIvaW5kZXg/cGFnZT0iLmNvbmNhdCh0aGlzLnJlY1BhZ2UpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgIF90aGlzLmZlZWRMaXN0ID0gX3RoaXMuZmVlZExpc3QuY29uY2F0KHJlcy5kYXRhKTsKCiAgICAgICAgICBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goInNldElzQWRkIiwgZmFsc2UpOwoKICAgICAgICAgIF90aGlzLmlzTG9hZCA9IGZhbHNlOwoKICAgICAgICAgIGlmICghcmVzLmRhdGEpIHsKICAgICAgICAgICAgX3RoaXMuaXNFbmQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy/lhbPms6jpobXpnaLojrflj5bmlbDmja4KICAgIGdldEF0dGVudGlvbjogZnVuY3Rpb24gZ2V0QXR0ZW50aW9uKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuYXhpb3MuZ2V0KCIvZm9sbG93TGlzdD9wYWdlPSIuY29uY2F0KHRoaXMuYXR0UGFnZSkpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgX3RoaXMyLmZvbGxvd0xpc3QgPSBfdGhpczIuZm9sbG93TGlzdC5jb25jYXQocmVzLmRhdGEpOwoKICAgICAgICAgIGlmIChMb2FkKSB7CiAgICAgICAgICAgIExvYWQuY2xvc2UoKTsKICAgICAgICAgICAgTG9hZCA9ICIiOwogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzMi5pc0xvYWQgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8v5rua5YqoCiAgICBsaXN0ZW5TY3JvbGw6IGZ1bmN0aW9uIGxpc3RlblNjcm9sbChlbGUpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigic2Nyb2xsIiwgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBzY3IgPSBlbGUuc2Nyb2xsVG9wOyAvLyDlkJHkuIrmu5rliqjnmoTpgqPkuIDpg6jliIbpq5jluqYKCiAgICAgICAgdmFyIGNsaWVudEhlaWdodCA9IGVsZS5jbGllbnRIZWlnaHQ7IC8vIOWxj+W5lemrmOW6puS5n+WwseaYr+W9k+WJjeiuvuWkh+mdmeaAgeS4i+S9oOaJgOeci+WIsOeahOinhuiniemrmOW6pgoKICAgICAgICB2YXIgc2NySGVpZ2h0ID0gZWxlLnNjcm9sbEhlaWdodDsgLy8g5pW05Liq572R6aG155qE5a6e6ZmF6auY5bqm77yM5YW85a65UGPnq68KCiAgICAgICAgaWYgKHNjciArIGNsaWVudEhlaWdodCArIDUgPj0gc2NySGVpZ2h0KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygi5Yiw5bqV5LqGIik7CgogICAgICAgICAgaWYgKHRoYXQuaXNMb2FkID09IGZhbHNlIHx8IHRoaXMuaXNFbmQgPT0gZmFsc2UpIHsKICAgICAgICAgICAgdGhhdC5pc0xvYWQgPSB0cnVlOwoKICAgICAgICAgICAgaWYgKHRoYXQuYWN0aXZlTmFtZSA9PSAicmVjb21tZW5kIikgewogICAgICAgICAgICAgIHRoYXQucmVjUGFnZSsrOwogICAgICAgICAgICAgIHRoYXQuZ2V0Q29udGVudCgpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoYXQuYXR0UGFnZSsrOwogICAgICAgICAgICAgIHRoYXQuZ2V0QXR0ZW50aW9uKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8v5YiH5o2i6YCJ6aG55Y2hCiAgICBjaGFuZ2VJdGVtOiBmdW5jdGlvbiBjaGFuZ2VJdGVtKCkgewogICAgICBjb25zb2xlLmxvZyh0aGlzLmFjdGl2ZU5hbWUpOwoKICAgICAgaWYgKHRoaXMuYWN0aXZlTmFtZSA9PSAiYXR0ZW50aW9uIikgewogICAgICAgIC8v6LCD55So5o6l5Y+jCiAgICAgICAgdGhpcy5nZXRBdHRlbnRpb24oKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmdldENvbnRlbnQoKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["Index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"Topstory-container\">\n    <div class=\"Topstory-mainColumn\">\n      <el-tabs v-model=\"activeName\" @tab-click=\"changeItem\">\n        <el-tab-pane label=\"推荐\" name=\"recommend\">\n          <div v-for=\"(item,index) in feedList\" :key=\"index\">\n            <feed-item :feedList=\"item\"></feed-item>\n          </div>\n        </el-tab-pane>\n        <el-tab-pane label=\"关注\" name=\"attention\">\n          <div v-for=\"(item,index) in followList\" :key=\"index\">\n            <feed-item :feedList=\"item\"></feed-item>\n          </div>\n        </el-tab-pane>\n      </el-tabs>\n      <div class=\"Loading\" v-show=\"isLoad\">拼命加载中</div>\n      <div class=\"Loading\" v-show=\"isEnd\">到底了</div>\n    </div>\n    <div class=\"GlobalSideBar\">\n      <global-side-bar></global-side-bar>\n    </div>\n  </div>\n</template>\n<script>\nimport FeedItem from \"@/components/FeedItem.vue\";\nimport GlobalSideBar from \"@/components/GlobalSideBar.vue\";\nimport { mapGetters } from \"vuex\";\nimport util from \"@/utils/index.js\";\n\nlet Load;\nexport default {\n  name: \"index\",\n  components: {\n    FeedItem,\n    GlobalSideBar\n  },\n  computed: {\n    //监听词条\n    ...mapGetters([\"isAdd\", \"searchList\"])\n  },\n  watch: {\n    isAdd: function(newValue) {\n      this.getContent();\n    },\n    searchList: function(newValue) {\n      this.feedList = newValue;\n      console.log(\"更新列表\");\n    }\n  },\n  data() {\n    return {\n      feedList: [],\n      activeName: \"recommend\",\n      followList: [],\n      isLoad: false,\n      recPage: 1, //推荐页面page\n      attPage: 1, //关注页面page\n      isEnd:false,\n    };\n  },\n  mounted() {\n    this.getContent();\n    this.listenScroll(document.documentElement);\n  },\n  methods: {\n    //推荐页面获取数据\n    getContent() {\n      this.$store.dispatch(\"search\", \"\");\n      this.axios.get(`/index?page=${this.recPage}`).then(res => {\n        if (res.status == 200) {\n          this.feedList = this.feedList.concat(res.data);\n          this.$store.dispatch(\"setIsAdd\", false);\n          this.isLoad = false;\n          if(!res.data){\n            this.isEnd = true;\n          }\n        }\n      });\n    },\n    //关注页面获取数据\n    getAttention() {\n      this.axios.get(`/followList?page=${this.attPage}`).then(res => {\n        if (res.status == 200) {\n          this.followList = this.followList.concat(res.data);\n           if (Load) {\n            Load.close();\n            Load=\"\";\n          }\n          this.isLoad = false;\n        }\n      });\n    },\n    //滚动\n    listenScroll(ele) {\n      let that = this;\n      window.addEventListener(\"scroll\", function() {\n        let scr = ele.scrollTop; // 向上滚动的那一部分高度\n        let clientHeight = ele.clientHeight; // 屏幕高度也就是当前设备静态下你所看到的视觉高度\n        let scrHeight = ele.scrollHeight; // 整个网页的实际高度，兼容Pc端\n        if (scr + clientHeight + 5 >= scrHeight) {\n          console.log(\"到底了\");\n          if (that.isLoad == false||this.isEnd == false) {\n            that.isLoad = true;\n            if (that.activeName == \"recommend\") {\n              that.recPage++;\n              that.getContent();\n            } else {\n              that.attPage++;\n              that.getAttention();\n            }\n          }\n        }\n      });\n    },\n    //切换选项卡\n    changeItem() {\n      console.log(this.activeName);\n      if (this.activeName == \"attention\") {\n        //调用接口\n        this.getAttention();\n      } else {\n        this.getContent();\n      }\n    }\n  }\n};\n</script>\n<style lang=\"scss\" >\n@import \"../assets/css/config\";\n.Topstory-container {\n  display: flex;\n  width: 1000px;\n  padding: 0 16px;\n  margin: 10px auto;\n  height: 100%;\n}\n.Topstory-mainColumn {\n  width: 654px;\n  height: 100%;\n  .el-tabs__header {\n    background: #ffffff;\n    padding: 10px 20px;\n    margin: 0;\n    border-bottom: 1px solid #ebebeb;\n  }\n  .el-tabs__item {\n    font-size: 16px;\n  }\n  .el-tabs__item.is-active {\n    color: $mainColor;\n  }\n  .el-tabs__nav-wrap::after {\n    background: transparent;\n  }\n  .el-tabs__active-bar {\n    height: 0;\n  }\n}\n.GlobalSideBar {\n  margin-left: 10px;\n  flex: 1;\n}\n.Loading {\n  height: 50px;\n  text-align: center;\n  color: $mainColor;\n\n}\n</style>"],"sourceRoot":"src/views"}]}
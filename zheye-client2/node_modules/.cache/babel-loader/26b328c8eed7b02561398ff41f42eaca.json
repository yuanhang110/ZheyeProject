{"remainingRequest":"C:\\Users\\xyh\\Desktop\\进化星球知乎\\第十八周资料\\zheye-client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\xyh\\Desktop\\进化星球知乎\\第十八周资料\\zheye-client\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\xyh\\Desktop\\进化星球知乎\\第十八周资料\\zheye-client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\xyh\\Desktop\\进化星球知乎\\第十八周资料\\zheye-client\\src\\views\\Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\xyh\\Desktop\\进化星球知乎\\第十八周资料\\zheye-client\\src\\views\\Index.vue","mtime":1595577834000},{"path":"C:\\Users\\xyh\\Desktop\\进化星球知乎\\第十八周资料\\zheye-client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\xyh\\Desktop\\进化星球知乎\\第十八周资料\\zheye-client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\xyh\\Desktop\\进化星球知乎\\第十八周资料\\zheye-client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\xyh\\Desktop\\进化星球知乎\\第十八周资料\\zheye-client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMveHloL0Rlc2t0b3AvXHU4RkRCXHU1MzE2XHU2NjFGXHU3NDAzXHU3N0U1XHU0RTRFL1x1N0IyQ1x1NTM0MVx1NTE2Qlx1NTQ2OFx1OEQ0NFx1NjU5OS96aGV5ZS1jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgRmVlZEl0ZW0gZnJvbSAiQC9jb21wb25lbnRzL0ZlZWRJdGVtLnZ1ZSI7CmltcG9ydCBHbG9iYWxTaWRlQmFyIGZyb20gIkAvY29tcG9uZW50cy9HbG9iYWxTaWRlQmFyLnZ1ZSI7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHV0aWwgZnJvbSAiQC91dGlscy9pbmRleC5qcyI7CnZhciBMb2FkOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImluZGV4IiwKICBjb21wb25lbnRzOiB7CiAgICBGZWVkSXRlbTogRmVlZEl0ZW0sCiAgICBHbG9iYWxTaWRlQmFyOiBHbG9iYWxTaWRlQmFyCiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyhbImlzQWRkIiwgInNlYXJjaExpc3QiXSkpLAogIHdhdGNoOiB7CiAgICBpc0FkZDogZnVuY3Rpb24gaXNBZGQobmV3VmFsdWUpIHsKICAgICAgdGhpcy5nZXRDb250ZW50KCk7CiAgICB9LAogICAgc2VhcmNoTGlzdDogZnVuY3Rpb24gc2VhcmNoTGlzdChuZXdWYWx1ZSkgewogICAgICB0aGlzLmZlZWRMaXN0ID0gbmV3VmFsdWU7CiAgICAgIGNvbnNvbGUubG9nKCLmm7TmlrDliJfooagiKTsKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmZWVkTGlzdDogW10sCiAgICAgIGFjdGl2ZU5hbWU6ICJyZWNvbW1lbmQiLAogICAgICBmb2xsb3dMaXN0OiBbXSwKICAgICAgaXNMb2FkOiBmYWxzZSwKICAgICAgcmVjUGFnZTogMSwKICAgICAgLy/mjqjojZDpobXpnaJwYWdlCiAgICAgIGF0dFBhZ2U6IDEsCiAgICAgIC8v5YWz5rOo6aG16Z2icGFnZQogICAgICBpc0VuZDogZmFsc2UKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRDb250ZW50KCk7CiAgICB0aGlzLmxpc3RlblNjcm9sbChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpOwogIH0sCiAgbWV0aG9kczogewogICAgLy/mjqjojZDpobXpnaLojrflj5bmlbDmja4KICAgIGdldENvbnRlbnQ6IGZ1bmN0aW9uIGdldENvbnRlbnQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic2VhcmNoIiwgIiIpOwogICAgICB0aGlzLmF4aW9zLmdldCgiL2luZGV4P3BhZ2U9Ii5jb25jYXQodGhpcy5yZWNQYWdlKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICBfdGhpcy5mZWVkTGlzdCA9IF90aGlzLmZlZWRMaXN0LmNvbmNhdChyZXMuZGF0YSk7CgogICAgICAgICAgX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCJzZXRJc0FkZCIsIGZhbHNlKTsKCiAgICAgICAgICBfdGhpcy5pc0xvYWQgPSBmYWxzZTsKCiAgICAgICAgICBpZiAoIXJlcy5kYXRhKSB7CiAgICAgICAgICAgIF90aGlzLmlzRW5kID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8v5YWz5rOo6aG16Z2i6I635Y+W5pWw5o2uCiAgICBnZXRBdHRlbnRpb246IGZ1bmN0aW9uIGdldEF0dGVudGlvbigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLmF4aW9zLmdldCgiL2ZvbGxvd0xpc3Q/cGFnZT0iLmNvbmNhdCh0aGlzLmF0dFBhZ2UpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgIF90aGlzMi5mb2xsb3dMaXN0ID0gX3RoaXMyLmZvbGxvd0xpc3QuY29uY2F0KHJlcy5kYXRhKTsKCiAgICAgICAgICBpZiAoTG9hZCkgewogICAgICAgICAgICBMb2FkLmNsb3NlKCk7CiAgICAgICAgICAgIExvYWQgPSAiIjsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczIuaXNMb2FkID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvL+a7muWKqAogICAgbGlzdGVuU2Nyb2xsOiBmdW5jdGlvbiBsaXN0ZW5TY3JvbGwoZWxlKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInNjcm9sbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgc2NyID0gZWxlLnNjcm9sbFRvcDsgLy8g5ZCR5LiK5rua5Yqo55qE6YKj5LiA6YOo5YiG6auY5bqmCgogICAgICAgIHZhciBjbGllbnRIZWlnaHQgPSBlbGUuY2xpZW50SGVpZ2h0OyAvLyDlsY/luZXpq5jluqbkuZ/lsLHmmK/lvZPliY3orr7lpIfpnZnmgIHkuIvkvaDmiYDnnIvliLDnmoTop4bop4npq5jluqYKCiAgICAgICAgdmFyIHNjckhlaWdodCA9IGVsZS5zY3JvbGxIZWlnaHQ7IC8vIOaVtOS4que9kemhteeahOWunumZhemrmOW6pu+8jOWFvOWuuVBj56uvCgogICAgICAgIGlmIChzY3IgKyBjbGllbnRIZWlnaHQgKyA1ID49IHNjckhlaWdodCkgewogICAgICAgICAgY29uc29sZS5sb2coIuWIsOW6leS6hiIpOwoKICAgICAgICAgIGlmICh0aGF0LmlzTG9hZCA9PSBmYWxzZSB8fCB0aGlzLmlzRW5kID09IGZhbHNlKSB7CiAgICAgICAgICAgIHRoYXQuaXNMb2FkID0gdHJ1ZTsKCiAgICAgICAgICAgIGlmICh0aGF0LmFjdGl2ZU5hbWUgPT0gInJlY29tbWVuZCIpIHsKICAgICAgICAgICAgICB0aGF0LnJlY1BhZ2UrKzsKICAgICAgICAgICAgICB0aGF0LmdldENvbnRlbnQoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGF0LmF0dFBhZ2UrKzsKICAgICAgICAgICAgICB0aGF0LmdldEF0dGVudGlvbigpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvL+WIh+aNoumAiemhueWNoQogICAgY2hhbmdlSXRlbTogZnVuY3Rpb24gY2hhbmdlSXRlbSgpIHsKICAgICAgY29uc29sZS5sb2codGhpcy5hY3RpdmVOYW1lKTsKCiAgICAgIGlmICh0aGlzLmFjdGl2ZU5hbWUgPT0gImF0dGVudGlvbiIpIHsKICAgICAgICAvL+iwg+eUqOaOpeWPowogICAgICAgIHRoaXMuZ2V0QXR0ZW50aW9uKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5nZXRDb250ZW50KCk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["Index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"Topstory-container\">\n    <div class=\"Topstory-mainColumn\">\n      <el-tabs v-model=\"activeName\" @tab-click=\"changeItem\">\n        <el-tab-pane label=\"推荐\" name=\"recommend\">\n          <div v-for=\"(item,index) in feedList\" :key=\"index\">\n            <feed-item :feedList=\"item\"></feed-item>\n          </div>\n        </el-tab-pane>\n        <el-tab-pane label=\"关注\" name=\"attention\">\n          <div v-for=\"(item,index) in followList\" :key=\"index\">\n            <feed-item :feedList=\"item\"></feed-item>\n          </div>\n        </el-tab-pane>\n      </el-tabs>\n      <div class=\"Loading\" v-show=\"isLoad\">拼命加载中</div>\n      <div class=\"Loading\" v-show=\"isEnd\">到底了</div>\n    </div>\n    <div class=\"GlobalSideBar\">\n      <global-side-bar></global-side-bar>\n    </div>\n  </div>\n</template>\n<script>\nimport FeedItem from \"@/components/FeedItem.vue\";\nimport GlobalSideBar from \"@/components/GlobalSideBar.vue\";\nimport { mapGetters } from \"vuex\";\nimport util from \"@/utils/index.js\";\n\nlet Load;\nexport default {\n  name: \"index\",\n  components: {\n    FeedItem,\n    GlobalSideBar\n  },\n  computed: {\n    //监听词条\n    ...mapGetters([\"isAdd\", \"searchList\"])\n  },\n  watch: {\n    isAdd: function(newValue) {\n      this.getContent();\n    },\n    searchList: function(newValue) {\n      this.feedList = newValue;\n      console.log(\"更新列表\");\n    }\n  },\n  data() {\n    return {\n      feedList: [],\n      activeName: \"recommend\",\n      followList: [],\n      isLoad: false,\n      recPage: 1, //推荐页面page\n      attPage: 1, //关注页面page\n      isEnd:false,\n    };\n  },\n  mounted() {\n    this.getContent();\n    this.listenScroll(document.documentElement);\n  },\n  methods: {\n    //推荐页面获取数据\n    getContent() {\n      this.$store.dispatch(\"search\", \"\");\n      this.axios.get(`/index?page=${this.recPage}`).then(res => {\n        if (res.status == 200) {\n          this.feedList = this.feedList.concat(res.data);\n          this.$store.dispatch(\"setIsAdd\", false);\n          this.isLoad = false;\n          if(!res.data){\n            this.isEnd = true;\n          }\n        }\n      });\n    },\n    //关注页面获取数据\n    getAttention() {\n      this.axios.get(`/followList?page=${this.attPage}`).then(res => {\n        if (res.status == 200) {\n          this.followList = this.followList.concat(res.data);\n           if (Load) {\n            Load.close();\n            Load=\"\";\n          }\n          this.isLoad = false;\n        }\n      });\n    },\n    //滚动\n    listenScroll(ele) {\n      let that = this;\n      window.addEventListener(\"scroll\", function() {\n        let scr = ele.scrollTop; // 向上滚动的那一部分高度\n        let clientHeight = ele.clientHeight; // 屏幕高度也就是当前设备静态下你所看到的视觉高度\n        let scrHeight = ele.scrollHeight; // 整个网页的实际高度，兼容Pc端\n        if (scr + clientHeight + 5 >= scrHeight) {\n          console.log(\"到底了\");\n          if (that.isLoad == false||this.isEnd == false) {\n            that.isLoad = true;\n            if (that.activeName == \"recommend\") {\n              that.recPage++;\n              that.getContent();\n            } else {\n              that.attPage++;\n              that.getAttention();\n            }\n          }\n        }\n      });\n    },\n    //切换选项卡\n    changeItem() {\n      console.log(this.activeName);\n      if (this.activeName == \"attention\") {\n        //调用接口\n        this.getAttention();\n      } else {\n        this.getContent();\n      }\n    }\n  }\n};\n</script>\n<style lang=\"scss\" >\n@import \"../assets/css/config\";\n.Topstory-container {\n  display: flex;\n  width: 1000px;\n  padding: 0 16px;\n  margin: 10px auto;\n  height: 100%;\n}\n.Topstory-mainColumn {\n  width: 654px;\n  height: 100%;\n  .el-tabs__header {\n    background: #ffffff;\n    padding: 10px 20px;\n    margin: 0;\n    border-bottom: 1px solid #ebebeb;\n  }\n  .el-tabs__item {\n    font-size: 16px;\n  }\n  .el-tabs__item.is-active {\n    color: $mainColor;\n  }\n  .el-tabs__nav-wrap::after {\n    background: transparent;\n  }\n  .el-tabs__active-bar {\n    height: 0;\n  }\n}\n.GlobalSideBar {\n  margin-left: 10px;\n  flex: 1;\n}\n.Loading {\n  height: 50px;\n  text-align: center;\n  color: $mainColor;\n\n}\n</style>"],"sourceRoot":"src/views"}]}
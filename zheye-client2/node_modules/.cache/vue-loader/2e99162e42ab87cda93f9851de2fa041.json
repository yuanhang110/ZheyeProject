{"remainingRequest":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\src\\components\\Comment.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\src\\components\\Comment.vue","mtime":1595128598000},{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDb21tZW50Qm9keSBmcm9tICJAL2NvbXBvbmVudHMvQ29tbWVudEJvZHkudnVlIjsKaW1wb3J0IFVzZXJDYXJkIGZyb20gIkAvY29tcG9uZW50cy9Vc2VyQ2FyZC52dWUiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJjb21tZW50IiwKICBjb21wb25lbnRzOiB7CiAgICBDb21tZW50Qm9keSwKICAgIFVzZXJDYXJkCiAgfSwKICBwcm9wczogewogICAgaWQ6IE51bWJlcgogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbW1lbnRMaXN0OiBbCiAgICAgICAgewogICAgICAgICAgbmFtZTogIuiLsembhOeZu+WcuiIsCiAgICAgICAgICB0aW1lOiAiMDQtMTEiLAogICAgICAgICAgY29tbWVudE1zZzogewogICAgICAgICAgICBpZDogMSwKICAgICAgICAgICAgbmFtZTogIuiLsembhOeZu+WcuiIsCiAgICAgICAgICAgIGNvbnRlbnQ6ICLkvaDlnKjor7Tku4DkuYjnjqnmhI8iLAogICAgICAgICAgICBsaWtlTnVtOiAiMTIiLAogICAgICAgICAgICBpc0xpa2U6IHRydWUsCiAgICAgICAgICAgIGlzRGlzbGlrZTogZmFsc2UKICAgICAgICAgIH0sCiAgICAgICAgICByZXBseXM6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIG5hbWU6ICLlm57lpI3nmoTkuroiLAogICAgICAgICAgICAgIHJlc3BvbmRlZDogIuiiq+WbnuWkjeeahOS6uiIsCiAgICAgICAgICAgICAgdGltZTogIjA0LTExIiwKICAgICAgICAgICAgICBjb21tZW50TXNnOiB7CiAgICAgICAgICAgICAgICBpZDogMiwKICAgICAgICAgICAgICAgIG5hbWU6ICLlm57lpI3nmoTkuroiLAogICAgICAgICAgICAgICAgY29udGVudDogIuS9oOeuoeaIkeivtOS7gOS5iOeOqeaEjyIsCiAgICAgICAgICAgICAgICBsaWtlTnVtOiAiMCIsCiAgICAgICAgICAgICAgICBpc0xpa2U6IGZhbHNlLAogICAgICAgICAgICAgICAgaXNEaXNsaWtlOiBmYWxzZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgXQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogIuiLsembhOeZu+WcuiIsCiAgICAgICAgICB0aW1lOiAiMDQtMTEiLAogICAgICAgICAgY29tbWVudE1zZzogewogICAgICAgICAgICBpZDogMywKICAgICAgICAgICAgbmFtZTogIuiLsembhOeZu+WcuiIsCiAgICAgICAgICAgIGNvbnRlbnQ6ICLkvaDlnKjor7Tku4DkuYjnjqnmhI8iLAogICAgICAgICAgICBsaWtlTnVtOiAiMTIiLAogICAgICAgICAgICBpc0xpa2U6IHRydWUsCiAgICAgICAgICAgIGlzRGlzbGlrZTogZmFsc2UKICAgICAgICAgIH0sCiAgICAgICAgICByZXBseXM6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIG5hbWU6ICLlm57lpI3nmoTkuroiLAogICAgICAgICAgICAgIHJlc3BvbmRlZDogIuiiq+WbnuWkjeeahOS6uiIsCiAgICAgICAgICAgICAgdGltZTogIjA0LTExIiwKICAgICAgICAgICAgICBjb21tZW50TXNnOiB7CiAgICAgICAgICAgICAgICBpZDogNCwKICAgICAgICAgICAgICAgIG5hbWU6ICLlm57lpI3nmoTkuroiLAogICAgICAgICAgICAgICAgY29udGVudDogIuS9oOeuoeaIkeivtOS7gOS5iOeOqeaEjyIsCiAgICAgICAgICAgICAgICBsaWtlTnVtOiAiMCIsCiAgICAgICAgICAgICAgICBpc0xpa2U6IGZhbHNlLAogICAgICAgICAgICAgICAgaXNEaXNsaWtlOiBmYWxzZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgXQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogIuiLsembhOeZu+WcuiIsCiAgICAgICAgICB0aW1lOiAiMDQtMTEiLAogICAgICAgICAgY29tbWVudE1zZzogewogICAgICAgICAgICBpZDogNSwKICAgICAgICAgICAgbmFtZTogIuiLsembhOeZu+WcuiIsCiAgICAgICAgICAgIGNvbnRlbnQ6ICLkvaDlnKjor7Tku4DkuYjnjqnmhI8iLAogICAgICAgICAgICBsaWtlTnVtOiAiMTIiLAogICAgICAgICAgICBpc0xpa2U6IHRydWUsCiAgICAgICAgICAgIGlzRGlzbGlrZTogZmFsc2UKICAgICAgICAgIH0sCiAgICAgICAgICByZXBseXM6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIG5hbWU6ICLlm57lpI3nmoTkuroiLAogICAgICAgICAgICAgIHJlc3BvbmRlZDogIuiiq+WbnuWkjeeahOS6uiIsCiAgICAgICAgICAgICAgdGltZTogIjA0LTExIiwKICAgICAgICAgICAgICBjb21tZW50TXNnOiB7CiAgICAgICAgICAgICAgICBuYW1lOiAi5Zue5aSN55qE5Lq6IiwKICAgICAgICAgICAgICAgIGlkOiA2LAogICAgICAgICAgICAgICAgY29udGVudDoKICAgICAgICAgICAgICAgICAgIuS9oOeuoeaIkeivtOS7gOS5iOeOqeaEj+S9oOeuoeaIkeivtOS7gOS5iOeOqeaEj+S9oOeuoeaIkeivtOS7gOS5iOeOqeaEj+S9oOeuoeaIkeivtOS7gOS5iOeOqeaEj+S9oOeuoeaIkeivtOS7gOS5iOeOqeaEj+S9oOeuoeaIkeivtOS7gOS5iOeOqeaEj+S9oOeuoeaIkeivtOS7gOS5iOeOqeaEj+S9oOeuoeaIkeivtOS7gOS5iOeOqeaEj+S9oOeuoeaIkeivtOS7gOS5iOeOqeaEj+S9oOeuoeaIkeivtOS7gOS5iOeOqeaEj+S9oOeuoeaIkeivtOS7gOS5iOeOqeaEjyIsCiAgICAgICAgICAgICAgICBsaWtlTnVtOiAiMTIiLAogICAgICAgICAgICAgICAgaXNMaWtlOiB0cnVlLAogICAgICAgICAgICAgICAgaXNEaXNsaWtlOiBmYWxzZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgXQogICAgICAgIH0KICAgICAgXSwKICAgICAgY29tbWVudDogIiIsCiAgICAgIGN1cnJlbnRQYWdlOiAxCiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0Q29tbWVudCh0aGlzLmN1cnJlbnRQYWdlKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8v6I635Y+W6K+E6K66CiAgICBnZXRDb21tZW50KHBhZ2UpIHsKICAgICAgdGhpcy5heGlvcwogICAgICAgIC5nZXQoYC9jb21tZW50L2xpc3Q/aWQ9JHt0aGlzLmlkfSZ0eXBlPSR7MX0mcGFnZT0ke3BhZ2V9YCkKICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgIHRoaXMuY29tbWVudExpc3QgPSByZXMuZGF0YTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvL+aUueWPmOivhOiuuumhtemdogogICAgY2hhbmdlUGFnZShwYWdlTnVtKSB7CiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSBwYWdlTnVtOwogICAgICB0aGlzLmdldENvbW1lbnQodGhpcy5jdXJyZW50UGFnZSk7CiAgICB9LAogICAgLy/lm57lpI3or4TorrrlhoXlrrkKICAgIGFkZFJlcGx5KCkgewogICAgICB0aGlzLmdldENvbW1lbnQodGhpcy5jdXJyZW50UGFnZSk7CiAgICB9LAogICAgLy/lj5Hooajor4TorroKICAgIHB1Ymxpc2hDb21tZW50KGlkKSB7CiAgICAgIGxldCBwYXJhbSA9IHsKICAgICAgICBjb250ZW50OiB0aGlzLmNvbW1lbnQsCiAgICAgICAgaWQ6IHRoaXMuaWQsCiAgICAgICAgdHlwZTogMQogICAgICB9OwogICAgICB0aGlzLmF4aW9zLnBvc3QoIi9jb21tZW50L2FkZCIsIHBhcmFtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogIuivhOiuuuaIkOWKnyIsCiAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIgogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHRoaXMuY29tbWVudCA9ICIiOwogICAgICAgIHRoaXMuZ2V0Q29tbWVudCh0aGlzLmN1cnJlbnRQYWdlKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["Comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Comment.vue","sourceRoot":"src/components","sourcesContent":["<!-- 评论功能 -->\n<template>\n  <div class=\"Comment\">\n    <div class=\"CommentTopBar\">{{commentList.totalNum}}条评论</div>\n    <div class=\"CommentItem\" v-for=\"(item,index) in commentList.data\" :key=\"index\">\n      <!-- 评论头 -->\n      <div class=\"CommentItem-meta\">\n        <!-- 个人信息 -->\n            <user-card :user=\"item.user\"></user-card>\n        <span class=\"CommentItem-name\">{{item.user.name}}</span>\n        <span class=\"CommentItem-time\">{{item.time}}</span>\n      </div>\n      <!-- 评论内容 -->\n      <comment-body :commentMsg=\"item\" @addReply=\"addReply\"></comment-body>\n      <template v-if=\"item.replies.data.length>0\">\n        <div\n          class=\"CommentItem-reply\"\n          v-for=\"(reply,replyIndex) in item.replies.data\"\n          :key=\"replyIndex\"\n        >\n          <!-- 回复头 -->\n          <div class=\"CommentItem-meta\">\n            <!-- 个人信息 -->\n            <user-card :user=\"reply.user\"></user-card>\n            <div class=\"CommentReply-users\">\n              <span class=\"CommentReply-name\">{{reply.user.name}}</span>\n              回复\n              <span class=\"CommentReply-name\">{{reply.responder.name}}</span>\n            </div>\n            <span class=\"CommentItem-time\">{{reply.time}}</span>\n          </div>\n          <!-- 评论内容 -->\n          <comment-body :commentMsg=\"reply\" @addReply=\"addReply\"></comment-body>\n        </div>\n      </template>\n    </div>\n    <!-- 分页 -->\n    <div class=\"PaginationWrap\">\n      <el-pagination\n        layout=\"prev, pager, next\"\n        :total=\"commentList.totalNum\"\n        :hide-on-single-page=\"true\"\n        @current-change=\"changePage\"\n      ></el-pagination>\n    </div>\n    <div class=\"Comment-footer\">\n      <el-input type=\"textarea\" resize=\"none\" autosize placeholder=\"写下你的评论……\" v-model=\"comment\"></el-input>\n      <button class=\"CommentReply-button\" :disabled=\"comment.length==0\" @click=\"publishComment\">发布</button>\n    </div>\n  </div>\n</template>\n<script>\nimport CommentBody from \"@/components/CommentBody.vue\";\nimport UserCard from \"@/components/UserCard.vue\";\n\nexport default {\n  name: \"comment\",\n  components: {\n    CommentBody,\n    UserCard\n  },\n  props: {\n    id: Number\n  },\n  data() {\n    return {\n      commentList: [\n        {\n          name: \"英雄登场\",\n          time: \"04-11\",\n          commentMsg: {\n            id: 1,\n            name: \"英雄登场\",\n            content: \"你在说什么玩意\",\n            likeNum: \"12\",\n            isLike: true,\n            isDislike: false\n          },\n          replys: [\n            {\n              name: \"回复的人\",\n              responded: \"被回复的人\",\n              time: \"04-11\",\n              commentMsg: {\n                id: 2,\n                name: \"回复的人\",\n                content: \"你管我说什么玩意\",\n                likeNum: \"0\",\n                isLike: false,\n                isDislike: false\n              }\n            }\n          ]\n        },\n        {\n          name: \"英雄登场\",\n          time: \"04-11\",\n          commentMsg: {\n            id: 3,\n            name: \"英雄登场\",\n            content: \"你在说什么玩意\",\n            likeNum: \"12\",\n            isLike: true,\n            isDislike: false\n          },\n          replys: [\n            {\n              name: \"回复的人\",\n              responded: \"被回复的人\",\n              time: \"04-11\",\n              commentMsg: {\n                id: 4,\n                name: \"回复的人\",\n                content: \"你管我说什么玩意\",\n                likeNum: \"0\",\n                isLike: false,\n                isDislike: false\n              }\n            }\n          ]\n        },\n        {\n          name: \"英雄登场\",\n          time: \"04-11\",\n          commentMsg: {\n            id: 5,\n            name: \"英雄登场\",\n            content: \"你在说什么玩意\",\n            likeNum: \"12\",\n            isLike: true,\n            isDislike: false\n          },\n          replys: [\n            {\n              name: \"回复的人\",\n              responded: \"被回复的人\",\n              time: \"04-11\",\n              commentMsg: {\n                name: \"回复的人\",\n                id: 6,\n                content:\n                  \"你管我说什么玩意你管我说什么玩意你管我说什么玩意你管我说什么玩意你管我说什么玩意你管我说什么玩意你管我说什么玩意你管我说什么玩意你管我说什么玩意你管我说什么玩意你管我说什么玩意\",\n                likeNum: \"12\",\n                isLike: true,\n                isDislike: false\n              }\n            }\n          ]\n        }\n      ],\n      comment: \"\",\n      currentPage: 1\n    };\n  },\n  mounted() {\n    this.getComment(this.currentPage);\n  },\n  methods: {\n    //获取评论\n    getComment(page) {\n      this.axios\n        .get(`/comment/list?id=${this.id}&type=${1}&page=${page}`)\n        .then(res => {\n          console.log(res);\n          this.commentList = res.data;\n        });\n    },\n    //改变评论页面\n    changePage(pageNum) {\n      this.currentPage = pageNum;\n      this.getComment(this.currentPage);\n    },\n    //回复评论内容\n    addReply() {\n      this.getComment(this.currentPage);\n    },\n    //发表评论\n    publishComment(id) {\n      let param = {\n        content: this.comment,\n        id: this.id,\n        type: 1\n      };\n      this.axios.post(\"/comment/add\", param).then(res => {\n        if (res.status == 200) {\n          this.$message({\n            message: \"评论成功\",\n            type: \"success\"\n          });\n        }\n        this.comment = \"\";\n        this.getComment(this.currentPage);\n      });\n    }\n  }\n};\n</script>\n<style lang='scss' scoped>\n@import \"../assets/css/config\";\n.Comment {\n  transition: all 0.3s;\n  border: 1px solid #ebebeb;\n  box-shadow: 0 1px 3px rgba(26, 26, 26, 0.1);\n  background: #fff;\n  margin-top: 12px;\n  border-radius: 4px;\n\n  &TopBar {\n    background: #fff;\n    border-bottom: 1px solid #f6f6f6;\n    height: 50px;\n    padding: 0 20px;\n    line-height: 50px;\n  }\n  .CommentItem {\n    padding: 12px 20px 10px;\n    font-size: 15px;\n    position: relative;\n  }\n  .CommentItem-meta {\n    display: flex;\n    height: 24px;\n    margin-bottom: 4px;\n    align-items: center;\n    width: 100%;\n    .CommentItem-avatar {\n      width: 24px;\n      height: 24px;\n      margin-right: 8px;\n    }\n    .CommentItem-name {\n      font-weight: 500;\n      flex: 1;\n    }\n    .CommentItem-time {\n      font-size: 14px;\n      color: $fontColor;\n    }\n  }\n  // 评论\n  .CommentItem-reply {\n    padding: 20px 0 12px 20px;\n    color: $fontColor;\n    .CommentReply-users {\n      flex: 1;\n    }\n    .CommentReply-name {\n      color: #1a1a1a;\n      font-weight: 500;\n    }\n  }\n  //写评论\n  .Comment-footer {\n    transition: all 0.5s;\n    padding: 12px 0 12px 20px;\n    display: flex;\n    align-items: center;\n    .el-textarea {\n      width: 86%;\n    }\n    .CommentReply-input {\n      padding: 6px 12px;\n      font-size: 14px;\n      border: 1px solid $fontColor;\n      border-radius: 4px;\n    }\n    .CommentReply-button {\n      height: 36px;\n      line-height: 36px;\n      padding: 0 12px;\n      margin-left: 20px;\n      color: #ffffff;\n      background: $mainColor;\n    }\n  }\n}\n//用户卡片\n.UserCard-wrap {\n  background-color: #fff;\n  padding: 0 10px;\n  position: relative;\n  .UserMessage {\n    display: flex;\n    font-size: 16px;\n    font-weight: 600;\n    border-bottom: 1px solid #ebebeb;\n  }\n  .UserAvatar-wrap {\n    width: 60px;\n    height: 40px; //只是为了撑起一定高度，不一定要跟图片一样高\n    margin-right: 20px;\n  }\n  .UserAvatar {\n    width: 60px;\n    height: 60px;\n    position: absolute;\n    top: -30px;\n  }\n  .UserContent {\n    margin-top: 12px;\n    display: flex;\n    align-items: center;\n    justify-content: space-around;\n    .UserContent-detail {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      font-weight: 600;\n      .UserContent-title {\n        font-size: 14px;\n        color: $fontColor;\n      }\n      .UserContent-num {\n        font-size: 16px;\n      }\n    }\n  }\n  .UserButton {\n    display: flex;\n    align-items: center;\n    justify-content: space-around;\n    font-size: 15px;\n    margin-top: 10px;\n    .AttentionBtn {\n      background-color: $mainColor;\n      color: #fff;\n      width: 140px;\n      height: 36px;\n      line-height: 36px;\n      text-align: center;\n      border-radius: 6px;\n      border: 1px solid $mainColor;\n      cursor: pointer;\n    }\n    .ChatBtn {\n      color: $fontColor;\n      width: 140px;\n      height: 36px;\n      line-height: 36px;\n      text-align: center;\n      border-radius: 6px;\n      border: 1px solid $fontColor;\n      cursor: pointer;\n    }\n  }\n}\n//分页\n.PaginationWrap {\n  padding: 0 40px;\n}\n</style>"]}]}
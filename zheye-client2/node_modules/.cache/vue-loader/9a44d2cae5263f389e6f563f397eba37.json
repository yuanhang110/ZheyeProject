{"remainingRequest":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\src\\views\\Index.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\src\\views\\Index.vue","mtime":1595577834000},{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpAaW1wb3J0ICIuLi9hc3NldHMvY3NzL2NvbmZpZyI7Ci5Ub3BzdG9yeS1jb250YWluZXIgewogIGRpc3BsYXk6IGZsZXg7CiAgd2lkdGg6IDEwMDBweDsKICBwYWRkaW5nOiAwIDE2cHg7CiAgbWFyZ2luOiAxMHB4IGF1dG87CiAgaGVpZ2h0OiAxMDAlOwp9Ci5Ub3BzdG9yeS1tYWluQ29sdW1uIHsKICB3aWR0aDogNjU0cHg7CiAgaGVpZ2h0OiAxMDAlOwogIC5lbC10YWJzX19oZWFkZXIgewogICAgYmFja2dyb3VuZDogI2ZmZmZmZjsKICAgIHBhZGRpbmc6IDEwcHggMjBweDsKICAgIG1hcmdpbjogMDsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWJlYmViOwogIH0KICAuZWwtdGFic19faXRlbSB7CiAgICBmb250LXNpemU6IDE2cHg7CiAgfQogIC5lbC10YWJzX19pdGVtLmlzLWFjdGl2ZSB7CiAgICBjb2xvcjogJG1haW5Db2xvcjsKICB9CiAgLmVsLXRhYnNfX25hdi13cmFwOjphZnRlciB7CiAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKICB9CiAgLmVsLXRhYnNfX2FjdGl2ZS1iYXIgewogICAgaGVpZ2h0OiAwOwogIH0KfQouR2xvYmFsU2lkZUJhciB7CiAgbWFyZ2luLWxlZnQ6IDEwcHg7CiAgZmxleDogMTsKfQouTG9hZGluZyB7CiAgaGVpZ2h0OiA1MHB4OwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBjb2xvcjogJG1haW5Db2xvcjsKCn0K"},{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Index.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"Topstory-container\">\n    <div class=\"Topstory-mainColumn\">\n      <el-tabs v-model=\"activeName\" @tab-click=\"changeItem\">\n        <el-tab-pane label=\"推荐\" name=\"recommend\">\n          <div v-for=\"(item,index) in feedList\" :key=\"index\">\n            <feed-item :feedList=\"item\"></feed-item>\n          </div>\n        </el-tab-pane>\n        <el-tab-pane label=\"关注\" name=\"attention\">\n          <div v-for=\"(item,index) in followList\" :key=\"index\">\n            <feed-item :feedList=\"item\"></feed-item>\n          </div>\n        </el-tab-pane>\n      </el-tabs>\n      <div class=\"Loading\" v-show=\"isLoad\">拼命加载中</div>\n      <div class=\"Loading\" v-show=\"isEnd\">到底了</div>\n    </div>\n    <div class=\"GlobalSideBar\">\n      <global-side-bar></global-side-bar>\n    </div>\n  </div>\n</template>\n<script>\nimport FeedItem from \"@/components/FeedItem.vue\";\nimport GlobalSideBar from \"@/components/GlobalSideBar.vue\";\nimport { mapGetters } from \"vuex\";\nimport util from \"@/utils/index.js\";\n\nlet Load;\nexport default {\n  name: \"index\",\n  components: {\n    FeedItem,\n    GlobalSideBar\n  },\n  computed: {\n    //监听词条\n    ...mapGetters([\"isAdd\", \"searchList\"])\n  },\n  watch: {\n    isAdd: function(newValue) {\n      this.getContent();\n    },\n    searchList: function(newValue) {\n      this.feedList = newValue;\n      console.log(\"更新列表\");\n    }\n  },\n  data() {\n    return {\n      feedList: [],\n      activeName: \"recommend\",\n      followList: [],\n      isLoad: false,\n      recPage: 1, //推荐页面page\n      attPage: 1, //关注页面page\n      isEnd:false,\n    };\n  },\n  mounted() {\n    this.getContent();\n    this.listenScroll(document.documentElement);\n  },\n  methods: {\n    //推荐页面获取数据\n    getContent() {\n      this.$store.dispatch(\"search\", \"\");\n      this.axios.get(`/index?page=${this.recPage}`).then(res => {\n        if (res.status == 200) {\n          this.feedList = this.feedList.concat(res.data);\n          this.$store.dispatch(\"setIsAdd\", false);\n          this.isLoad = false;\n          if(!res.data){\n            this.isEnd = true;\n          }\n        }\n      });\n    },\n    //关注页面获取数据\n    getAttention() {\n      this.axios.get(`/followList?page=${this.attPage}`).then(res => {\n        if (res.status == 200) {\n          this.followList = this.followList.concat(res.data);\n           if (Load) {\n            Load.close();\n            Load=\"\";\n          }\n          this.isLoad = false;\n        }\n      });\n    },\n    //滚动\n    listenScroll(ele) {\n      let that = this;\n      window.addEventListener(\"scroll\", function() {\n        let scr = ele.scrollTop; // 向上滚动的那一部分高度\n        let clientHeight = ele.clientHeight; // 屏幕高度也就是当前设备静态下你所看到的视觉高度\n        let scrHeight = ele.scrollHeight; // 整个网页的实际高度，兼容Pc端\n        if (scr + clientHeight + 5 >= scrHeight) {\n          console.log(\"到底了\");\n          if (that.isLoad == false||this.isEnd == false) {\n            that.isLoad = true;\n            if (that.activeName == \"recommend\") {\n              that.recPage++;\n              that.getContent();\n            } else {\n              that.attPage++;\n              that.getAttention();\n            }\n          }\n        }\n      });\n    },\n    //切换选项卡\n    changeItem() {\n      console.log(this.activeName);\n      if (this.activeName == \"attention\") {\n        //调用接口\n        this.getAttention();\n      } else {\n        this.getContent();\n      }\n    }\n  }\n};\n</script>\n<style lang=\"scss\" >\n@import \"../assets/css/config\";\n.Topstory-container {\n  display: flex;\n  width: 1000px;\n  padding: 0 16px;\n  margin: 10px auto;\n  height: 100%;\n}\n.Topstory-mainColumn {\n  width: 654px;\n  height: 100%;\n  .el-tabs__header {\n    background: #ffffff;\n    padding: 10px 20px;\n    margin: 0;\n    border-bottom: 1px solid #ebebeb;\n  }\n  .el-tabs__item {\n    font-size: 16px;\n  }\n  .el-tabs__item.is-active {\n    color: $mainColor;\n  }\n  .el-tabs__nav-wrap::after {\n    background: transparent;\n  }\n  .el-tabs__active-bar {\n    height: 0;\n  }\n}\n.GlobalSideBar {\n  margin-left: 10px;\n  flex: 1;\n}\n.Loading {\n  height: 50px;\n  text-align: center;\n  color: $mainColor;\n\n}\n</style>"]}]}
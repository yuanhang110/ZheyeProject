{"remainingRequest":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\src\\components\\CommentBody.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\src\\components\\CommentBody.vue","mtime":1595128598000},{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\xyh\\Desktop\\GraduateDesign\\zheye-client2\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiY29tbWVudC1ib2R5IiwKICBwcm9wczogewogICAgY29tbWVudE1zZzogT2JqZWN0LAogICAgdHlwZTpOdW1iZXIKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByZXBseU1zZzogIiIsCiAgICAgIGRpc2FibGVkOiB0cnVlLAogICAgICBpc1JlcGx5OiBmYWxzZSAvL+aYr+WQpuWbnuWkjQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vICAg54K56LWeCiAgICBjaGFuZ2VMaWtlKCkgewogICAgICBpZiAodGhpcy5jb21tZW50TXNnLmlzTGlrZSkgewogICAgICAgIC8v5Y+W5raI6LWeCiAgICAgICAgdGhpcy5heGlvcwogICAgICAgICAgLmdldChgc3VwcG9ydF9jYW5jZWw/aWQ9JHt0aGlzLmNvbW1lbnRNc2cuaWR9JnR5cGU9M2ApCiAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgICB0aGlzLmNvbW1lbnRNc2cuaXNMaWtlID0gIXRoaXMuY29tbWVudE1zZy5pc0xpa2U7CiAgICAgICAgICAgICAgdGhpcy5jb21tZW50TXNnLmxpa2VOdW0tLTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5heGlvcy5nZXQoYHN1cHBvcnQ/aWQ9JHt0aGlzLmNvbW1lbnRNc2cuaWR9JnR5cGU9M2ApLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICB0aGlzLmNvbW1lbnRNc2cuaXNMaWtlID0gIXRoaXMuY29tbWVudE1zZy5pc0xpa2U7CiAgICAgICAgICAgIGlmICh0aGlzLmNvbW1lbnRNc2cuaXNEaXNMaWtlKSB7CiAgICAgICAgICAgICAgdGhpcy5jb21tZW50TXNnLmlzRGlzTGlrZSA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuY29tbWVudE1zZy5saWtlTnVtKys7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICAvL+i4qQogICAgY2hhbmdlRGlzbGlrZSgpIHsKICAgICAgaWYgKHRoaXMuY29tbWVudE1zZy5pc0Rpc0xpa2UpIHsKICAgICAgICAvL+WPlua2iOi4qQogICAgICAgIHRoaXMuYXhpb3MKICAgICAgICAgIC5nZXQoYHVuc3VwcG9ydF9jYW5jZWw/aWQ9JHt0aGlzLmNvbW1lbnRNc2cuaWR9JnR5cGU9M2ApCiAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgICB0aGlzLmNvbW1lbnRNc2cuaXNEaXNMaWtlID0gIXRoaXMuY29tbWVudE1zZy5pc0Rpc0xpa2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICB9ZWxzZXsKICAgICAgICAgdGhpcy5heGlvcwogICAgICAgICAgLmdldChgdW5zdXBwb3J0P2lkPSR7dGhpcy5jb21tZW50TXNnLmlkfSZ0eXBlPTNgKQogICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgICAgdGhpcy5jb21tZW50TXNnLmlzRGlzTGlrZSA9ICF0aGlzLmNvbW1lbnRNc2cuaXNEaXNMaWtlOwogICAgICAgICAgICAgIGlmKHRoaXMuY29tbWVudE1zZy5pc0xpa2UpewogICAgICAgICAgICAgICAgdGhpcy5jb21tZW50TXNnLmlzTGlrZT1mYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuY29tbWVudE1zZy5saWtlTnVtLS07CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICAvL+WPkeW4g+WbnuWkjQogICAgcHVibGlzaFJlcGx5KCl7CiAgICAgIGxldCBwYXJhbSA9IHsKICAgICAgICBjb250ZW50OnRoaXMucmVwbHlNc2csCiAgICAgICAgaWQ6dGhpcy5jb21tZW50TXNnLmlkLAogICAgICAgIHR5cGU6MgogICAgICB9CiAgICAgIHRoaXMuYXhpb3MucG9zdCgnL2NvbW1lbnQvYWRkJyxwYXJhbSkudGhlbihyZXM9PnsKICAgICAgICBpZihyZXMuc3RhdHVzID09IDIwMCl7CiAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgbWVzc2FnZTogIuivhOiuuuaIkOWKnyIsCiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICB0aGlzLnJlcGx5TXNnID0gIiI7CiAgICAgICAgdGhpcy4kZW1pdCgnYWRkUmVwbHknKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["CommentBody.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CommentBody.vue","sourceRoot":"src/components","sourcesContent":["  <!-- 评论细节 -->\n<template>\n  <!-- 评论内容 -->\n  <div class=\"CommentItem-body\">\n    <div class=\"CommentItem-content\">{{commentMsg.content}}</div>\n    <div class=\"CommentItem-icons\">\n      <div class=\"CommentItem-icon\" :class=\"{IsLike:commentMsg.isLike}\" @click=\"changeLike\">\n        <span class=\"icon-zan1 iconfont\"></span>\n        <span class=\"CommentItem-desc\">{{commentMsg.likeNum ? commentMsg.likeNum :'0'}}</span>\n      </div>\n      <div\n        class=\"CommentItem-icon HoverIcon\"\n        :class=\"{showIcon:isReply}\"\n        @click=\"isReply = !isReply\"\n      >\n        <span class=\"icon-pinglun1 iconfont\"></span>\n        <span class=\"CommentItem-desc\">{{isReply? '取消回复':'回复'}}</span>\n      </div>\n      <div class=\"CommentItem-icon HoverIcon\" :class=\"{showIcon:isReply}\" @click=\"changeDislike\">\n        <span class=\"icon-cai iconfont\"></span>\n        <span class=\"CommentItem-desc\">{{commentMsg.isDisLike ? \"取消踩\" : \"踩\"}}</span>\n      </div>\n    </div>\n    <!-- 回复 -->\n    <transition name=\"fade\">\n      <div class=\"CommentReply\" v-if=\"isReply\">\n        <el-input\n          type=\"textarea\"\n          resize=\"none\"\n          autosize\n          :placeholder=\"'回复'+commentMsg.user.name\"\n          v-model=\"replyMsg\"\n        ></el-input>\n        <button class=\"CommentReply-button\" :disabled=\"replyMsg.length==0\" @click=\"publishReply\">发表</button>\n      </div>\n    </transition>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"comment-body\",\n  props: {\n    commentMsg: Object,\n    type:Number\n  },\n  data() {\n    return {\n      replyMsg: \"\",\n      disabled: true,\n      isReply: false //是否回复\n    };\n  },\n  methods: {\n    //   点赞\n    changeLike() {\n      if (this.commentMsg.isLike) {\n        //取消赞\n        this.axios\n          .get(`support_cancel?id=${this.commentMsg.id}&type=3`)\n          .then(res => {\n            if (res.status == 200) {\n              this.commentMsg.isLike = !this.commentMsg.isLike;\n              this.commentMsg.likeNum--;\n            }\n          });\n      } else {\n        this.axios.get(`support?id=${this.commentMsg.id}&type=3`).then(res => {\n          if (res.status == 200) {\n            this.commentMsg.isLike = !this.commentMsg.isLike;\n            if (this.commentMsg.isDisLike) {\n              this.commentMsg.isDisLike = false;\n            }\n            this.commentMsg.likeNum++;\n          }\n        });\n      }\n    },\n    //踩\n    changeDislike() {\n      if (this.commentMsg.isDisLike) {\n        //取消踩\n        this.axios\n          .get(`unsupport_cancel?id=${this.commentMsg.id}&type=3`)\n          .then(res => {\n            if (res.status == 200) {\n              this.commentMsg.isDisLike = !this.commentMsg.isDisLike;\n            }\n          });\n      }else{\n         this.axios\n          .get(`unsupport?id=${this.commentMsg.id}&type=3`)\n          .then(res => {\n            if (res.status == 200) {\n              this.commentMsg.isDisLike = !this.commentMsg.isDisLike;\n              if(this.commentMsg.isLike){\n                this.commentMsg.isLike=false;\n                this.commentMsg.likeNum--;\n              }\n\n            }\n          });\n      }\n    },\n    //发布回复\n    publishReply(){\n      let param = {\n        content:this.replyMsg,\n        id:this.commentMsg.id,\n        type:2\n      }\n      this.axios.post('/comment/add',param).then(res=>{\n        if(res.status == 200){\n           this.$message({\n              message: \"评论成功\",\n              type: \"success\"\n            });\n        }\n        this.replyMsg = \"\";\n        this.$emit('addReply');\n      });\n    }\n  }\n};\n</script>\n<style lang='scss' >\n@import \"../assets/css/config\";\n.fade-enter-active,\n.fade-leave-active {\n  opacity: 1;\n}\n.fade-enter,\n.fade-leave-to {\n  opacity: 0;\n}\n// 评论身\n.CommentItem-body {\n  position: relative; //为了分割线\n  color: #1a1a1a;\n  padding: 0 0 10px 33px;\n\n  .CommentItem-content {\n    margin-bottom: 6px;\n  }\n  .CommentItem-icons {\n    display: flex;\n    align-items: center;\n    font-size: 14px;\n    margin-top: 4px;\n    color: $fontColor;\n    .CommentItem-icon {\n      display: flex;\n      align-items: center;\n      .CommentItem-desc {\n        margin-left: 4px;\n        cursor: pointer;\n      }\n    }\n    .HoverIcon {\n      margin-left: 20px;\n      transition: opacity 0.2s;\n      opacity: 0;\n    }\n\n    &:hover .HoverIcon {\n      opacity: 1;\n    }\n    .showIcon {\n      opacity: 1;\n    }\n  }\n  .IsLike {\n    color: $mainColor;\n    &:hover {\n      color: #175199;\n    }\n  }\n  //回复\n  .CommentReply {\n    transition: all 0.2s;\n    padding: 12px 0;\n    display: flex;\n    align-items: center;\n    .el-textarea {\n      width: 86%;\n    }\n    .CommentReply-input {\n      padding: 6px 12px;\n      font-size: 14px;\n      border: 1px solid $fontColor;\n      border-radius: 4px;\n    }\n    .CommentReply-button {\n      height: 36px;\n      line-height: 36px;\n      padding: 0 12px;\n      margin-left: 20px;\n      color: #ffffff;\n      background: $mainColor;\n    }\n  }\n  &:after {\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: -5px;\n    display: block;\n    margin: 0 20px;\n    border-bottom: 1px solid #f6f6f6;\n    content: \"\";\n  }\n}\n</style>"]}]}